Version 4
SHEET 1 1532 3348
WIRE -704 -1200 -896 -1200
WIRE -352 -1200 -704 -1200
WIRE 80 -1200 -352 -1200
WIRE 480 -1200 80 -1200
WIRE -896 -1184 -896 -1200
WIRE -896 -1056 -896 -1104
WIRE -352 -1056 -352 -1200
WIRE 80 -1056 80 -1200
WIRE 480 -1056 480 -1200
WIRE -368 -896 -368 -960
WIRE -336 -896 -336 -960
WIRE -256 -896 -336 -896
WIRE 64 -896 64 -960
WIRE 96 -896 96 -960
WIRE 192 -896 96 -896
WIRE 464 -896 464 -960
WIRE 496 -896 496 -960
WIRE 592 -896 496 -896
WIRE -768 -784 -912 -784
WIRE -352 -784 -768 -784
WIRE 80 -784 -352 -784
WIRE 480 -784 80 -784
WIRE -352 -656 -352 -784
WIRE 80 -656 80 -784
WIRE 480 -656 480 -784
WIRE -912 -592 -912 -784
WIRE -368 -480 -368 -560
WIRE -336 -480 -336 -560
WIRE -256 -480 -256 -896
WIRE -256 -480 -336 -480
WIRE 64 -480 64 -560
WIRE 96 -480 96 -560
WIRE 192 -480 192 -896
WIRE 192 -480 96 -480
WIRE 496 -480 496 -560
WIRE 592 -480 592 -896
WIRE 592 -480 496 -480
WIRE 464 -464 464 -560
WIRE -912 -448 -912 -512
WIRE -768 -368 -912 -368
WIRE -352 -368 -768 -368
WIRE 80 -368 -352 -368
WIRE 480 -368 80 -368
WIRE 480 -256 480 -368
WIRE -352 -240 -352 -368
WIRE 80 -240 80 -368
WIRE -912 -160 -912 -368
WIRE -368 -64 -368 -144
WIRE -336 -64 -336 -144
WIRE -256 -64 -256 -480
WIRE -256 -64 -336 -64
WIRE 64 -64 64 -144
WIRE 96 -64 96 -144
WIRE 192 -64 192 -480
WIRE 192 -64 96 -64
WIRE 464 -64 464 -160
WIRE 496 -64 496 -160
WIRE 592 -64 592 -480
WIRE 592 -64 496 -64
WIRE -912 -16 -912 -80
WIRE -368 -16 -368 -64
WIRE -256 64 -256 -64
WIRE 192 64 192 -64
WIRE 592 64 592 -64
WIRE -256 160 -256 64
WIRE -112 160 -256 160
WIRE 192 160 192 64
WIRE 320 160 192 160
WIRE 592 160 592 64
WIRE 736 160 592 160
WIRE -256 192 -256 160
WIRE 192 192 192 160
WIRE 592 192 592 160
WIRE -272 240 -608 240
WIRE 32 240 -176 240
WIRE 176 240 112 240
WIRE 448 240 272 240
WIRE 576 240 528 240
WIRE 864 240 672 240
WIRE 1072 240 944 240
WIRE -224 336 -224 240
WIRE -224 336 -464 336
WIRE -112 336 -112 224
WIRE -112 336 -224 336
WIRE 224 336 224 240
WIRE 224 336 -112 336
WIRE 320 336 320 224
WIRE 320 336 224 336
WIRE 624 336 624 240
WIRE 624 336 320 336
WIRE 736 336 736 224
WIRE 736 336 624 336
WIRE -464 400 -464 336
WIRE 1072 400 1072 320
WIRE 224 544 128 544
WIRE 224 560 224 544
WIRE 128 672 128 544
WIRE 0 720 -32 720
WIRE 80 720 64 720
WIRE 128 768 128 752
WIRE 496 768 128 768
WIRE -32 816 -32 720
WIRE 0 816 -32 816
WIRE 80 816 80 720
WIRE 240 816 80 816
WIRE 464 816 416 816
WIRE 592 816 544 816
WIRE 128 864 128 768
WIRE 496 864 496 768
WIRE -608 880 -608 240
WIRE -32 880 -32 816
WIRE -32 880 -608 880
WIRE 96 880 -32 880
WIRE 416 880 416 816
WIRE 416 880 384 880
WIRE 464 880 416 880
WIRE 240 896 240 816
WIRE 240 896 160 896
WIRE 288 896 240 896
WIRE 384 896 384 880
WIRE 384 896 368 896
WIRE 592 896 592 816
WIRE 592 896 528 896
WIRE 688 896 592 896
WIRE 96 912 32 912
WIRE 464 912 416 912
WIRE 32 944 32 912
WIRE 128 976 128 928
WIRE 496 976 496 928
WIRE 496 976 128 976
WIRE 128 1040 128 976
WIRE 416 1056 416 912
WIRE 32 1072 32 1024
WIRE 128 1184 128 1120
WIRE 688 1440 688 896
WIRE 704 1440 688 1440
WIRE 1264 1440 704 1440
WIRE 1264 1520 1264 1440
WIRE 1248 1776 1248 1616
WIRE 1280 1872 1280 1616
WIRE 1280 1872 736 1872
WIRE 736 1888 736 1872
WIRE 736 1984 736 1888
WIRE 880 1984 736 1984
WIRE 736 2016 736 1984
WIRE 1008 2064 816 2064
WIRE 1216 2064 1088 2064
WIRE 720 2160 720 2064
WIRE 752 2160 720 2160
WIRE 768 2160 768 2064
WIRE 768 2160 752 2160
WIRE 880 2160 880 2048
WIRE 880 2160 768 2160
WIRE 752 2208 752 2160
WIRE 800 2208 752 2208
WIRE 1216 2224 1216 2144
FLAG 1072 400 0
FLAG 592 64 Vg3
FLAG -368 -480 state12
FLAG -368 -64 state13
FLAG 192 64 Vg2
FLAG -256 64 Vg1
FLAG 64 -896 state21
FLAG 64 -480 state22
FLAG 64 -64 state23
FLAG 464 -896 state31
FLAG 464 -464 state32
FLAG 464 -64 state33
FLAG -464 400 0
FLAG -368 -896 state11
FLAG 224 560 0
FLAG 128 1184 0
FLAG 1216 2224 0
FLAG 736 1888 Vg_4
FLAG -912 -448 0
FLAG -912 -16 0
FLAG -896 -1056 0
FLAG -768 -784 Vpulse2
FLAG -768 -368 Vpulse3
FLAG -704 -1200 Vpulse1
FLAG 1248 1776 s
FLAG 800 2208 0
FLAG 32 1072 0
FLAG 416 1056 0
FLAG 704 1440 TIA_Vout
SYMBOL voltage 1072 224 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName VDD1
SYMATTR Value 3
SYMBOL nmos4 672 192 R90
SYMATTR InstName M1
SYMBOL cap 720 160 R0
WINDOW 0 31 11 Left 2
WINDOW 3 30 56 Left 2
SYMATTR InstName Cgb1
SYMATTR Value {C3gb}
SYMBOL nmos4 272 192 R90
SYMATTR InstName M2
SYMBOL nmos4 -176 192 R90
SYMATTR InstName M3
SYMBOL cap 304 160 R0
SYMATTR InstName Cgb2
SYMATTR Value {C2gb}
SYMBOL cap -128 160 R0
SYMATTR InstName Cgb3
SYMATTR Value {C1gb}
SYMBOL res 960 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rd1
SYMATTR Value 10
SYMBOL res 544 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL res 128 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 10
SYMBOL voltage 128 768 R180
WINDOW 0 24 96 Left 2
WINDOW 3 -49 20 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 3
SYMBOL voltage 128 1024 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value -3
SYMBOL res 96 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 95k
SYMBOL cap 64 704 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 5p
SYMBOL voltage 1216 2048 R0
SYMATTR InstName VDD2
SYMATTR Value 3
SYMBOL nmos4 816 2016 R90
SYMATTR InstName M4
SYMBOL cap 864 1984 R0
WINDOW 0 31 11 Left 2
WINDOW 3 30 56 Left 2
SYMATTR InstName Cgb4
SYMATTR Value {C3gb}
SYMBOL res 1104 2048 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rd4
SYMATTR Value 10
SYMBOL voltage -896 -1200 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vpulse1
SYMATTR Value PULSE(0 1 0 100n 100n 2u 10u)
SYMBOL voltage -912 -608 R0
SYMATTR InstName Vpulse2
SYMATTR Value PULSE(0 1 0 100n 100n 2u 10u)
SYMBOL voltage -912 -176 R0
SYMATTR InstName Vpulse3
SYMATTR Value PULSE(0 1 0 100n 100n 2u 10u)
SYMBOL pseudo_memcapacitor -352 -1008 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U9
SYMBOL pseudo_memcapacitor 80 -1008 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U3
SYMBOL pseudo_memcapacitor 480 -1008 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U1
SYMBOL pseudo_memcapacitor -352 -608 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U2
SYMBOL pseudo_memcapacitor 80 -608 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U4
SYMBOL pseudo_memcapacitor 480 -608 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U5
SYMBOL pseudo_memcapacitor -352 -192 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U6
SYMBOL pseudo_memcapacitor 480 -208 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U8
SYMBOL pseudo_memcapacitor 80 -192 R90
WINDOW 123 0 -12 Bottom 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U7
SYMBOL pseudo_memcapacitor 1264 1568 R90
WINDOW 123 0 68 Top 2
SYMATTR Value2 x0=0.1
SYMATTR InstName U20
SYMBOL voltage 32 928 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 50m
SYMBOL OpAmps\\LTC6241 128 896 R0
SYMATTR InstName U10
SYMBOL OpAmps\\LTC6241 496 896 R0
SYMATTR InstName U21
SYMBOL res 560 800 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R26
SYMATTR Value 1k
SYMBOL res 384 880 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R27
SYMATTR Value 1k
TEXT -560 -1296 Left 2 !.model NMOS NMOS((LEVEL=3 L=26u W=94u Vto=0.2 Tox=22n TPG=0 Uo=798 THETA=42m PHI=66)
TEXT -560 -1272 Left 2 !.param C1gb=100p C2gb=100p C3gb=100p
TEXT 680 648 Left 2 !.tran 0 1m 0 100n
